tosca_definitions_version: cloudify_dsl_1_0

imports:
    - http://www.getcloudify.org/spec/cloudify/3.2rc1/types.yaml
    - test_plugin.yaml

inputs:
    config:
        description: config data
        default: {}
    image_id:
        description: image id in GCP
        default: ''
    instance_type:
        type: string

node_types:
    cloudify.gcp.Root:
        derived_from: cloudify.nodes.Root
        interfaces:
            cloudify.interfaces.lifecycle:
                start:
                    implementation: gcp_plugin.plugin.tasks.create_instance
                    inputs:
                        gcp_config:
                            default: { get_input: config }
                        instance_type:
                            default: n1-standard-1
                        image_id:
                            default: { get_input: image_id }
                        properties:
                            default: { externalIP: false }
                stop:
                    implementation: gcp_plugin.plugin.tasks.delete_instance
                    inputs:
                        gcp_config:
                            default: { get_input: config }
node_templates:
    testnode:
        type: cloudify.gcp.Root
